(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30b51246"],{"159b":function(t,e,a){var n=a("da84"),o=a("fdbc"),i=a("785a"),s=a("17c2"),l=a("9112"),r=function(t){if(t&&t.forEach!==s)try{l(t,"forEach",s)}catch(e){t.forEach=s}};for(var c in o)o[c]&&r(n[c]&&n[c].prototype);r(i)},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,o=a("a640"),i=o("forEach");t.exports=i?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"5c70":function(t,e,a){"use strict";a("677e")},"677e":function(t,e,a){},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,a){var n=a("23e7"),o=a("7b0b"),i=a("df75"),s=a("d039"),l=s((function(){i(1)}));n({target:"Object",stat:!0,forced:l},{keys:function(t){return i(o(t))}})},e02e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan"},[a("el-form",{ref:"searchForm",attrs:{size:"small",inline:!0,model:t.searchForm}},[a("el-form-item",{attrs:{label:"计划编号",prop:"planCode"}},[a("el-input",{attrs:{placeholder:"计划编号"},model:{value:t.searchForm.planCode,callback:function(e){t.$set(t.searchForm,"planCode",e)},expression:"searchForm.planCode"}})],1),a("el-form-item",{attrs:{label:"计划状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"计划状态"},on:{change:t.getData},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"启用",value:"normal"}}),a("el-option",{attrs:{label:"禁用",value:"forbid"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getData}},[t._v("查询")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-refresh"},on:{click:t.reset}},[t._v("重置")]),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(e){t.addVisible=!0}}},[t._v("新增")]),a("el-button",{attrs:{type:"danger"},on:{click:t.updateStatus}},[t._v("更新状态")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"planTable",staticClass:"planTable",staticStyle:{width:"100%"},attrs:{border:"",size:"mini",stripe:"",data:t.dataList}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"planCode",label:"计划编号",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{staticClass:"planCode",attrs:{underline:!1,type:"primary"},on:{click:function(a){return t.lookContent(e.row.uuid)}}},[t._v(t._s(e.row.planCode)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"description",label:"计划名称"}}),a("el-table-column",{attrs:{prop:"srcDb",label:"源数据库"}}),a("el-table-column",{attrs:{prop:"destDb",label:"目标数据库"}}),a("el-table-column",{attrs:{prop:"srcProject",label:"源系统"}}),a("el-table-column",{attrs:{prop:"destProject",label:"目标系统"}}),a("el-table-column",{attrs:{width:"80",label:"启用状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["normal"===e.row.status?a("el-tag",{attrs:{type:"success",size:"small"}},[t._v("启用")]):a("el-tag",{attrs:{type:"danger",size:"small"}},[t._v("禁用")])]}}])}),a("el-table-column",{attrs:{width:"150",prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{width:"150",prop:"updateTime",label:"更新时间"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.del(e.row.uuid)}}},[a("i",{staticClass:"el-icon-delete"}),t._v(" 删除")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.openEdit(e.row.uuid)}}},[a("i",{staticClass:"el-icon-edit"}),t._v(" 编辑")])]}}])})],1),a("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"新增计划",visible:t.addVisible},on:{"update:visible":function(e){t.addVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.addRules}},[a("el-form-item",{attrs:{prop:"planContent"}},[a("el-input",{attrs:{resize:"none",type:"textarea",rows:15,placeholder:"请输入内容"},model:{value:t.addForm.planContent,callback:function(e){t.$set(t.addForm,"planContent",e)},expression:"addForm.planContent"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.addCancel}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.add}},[t._v("保 存")])],1)],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"编辑计划",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.addRules}},[a("el-form-item",{attrs:{prop:"planContent"}},[a("el-input",{attrs:{resize:"none",type:"textarea",rows:15,placeholder:"请输入内容"},model:{value:t.editForm.planContent,callback:function(e){t.$set(t.editForm,"planContent",e)},expression:"editForm.planContent"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.editCancel}},[t._v("取 消")]),a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.edit}},[t._v("更新")])],1)],1),a("el-dialog",{attrs:{visible:t.showVisible},on:{"update:visible":function(e){t.showVisible=e}}},[t.showVisible?a("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[a("code",{staticClass:"javascript showContent",domProps:{textContent:t._s(t.showContent)}})]):t._e()])],1)},o=[],i=(a("d3b7"),a("159b"),a("b64b"),{name:"Plan.vue",data:function(){return{loading:!0,searchForm:{status:"",planCode:""},addForm:{planContent:""},editForm:{planContent:""},addVisible:!1,showVisible:!1,editVisible:!1,showContent:"",dataList:[],total:0,pageSize:20,currentPage:1,addRules:{planContent:[{required:!0,message:"请填写同步计划内容",trigger:"blur"}]}}},methods:{reset:function(){this.$refs["searchForm"].resetFields(),this.getData()},updateStatus:function(){var t=this,e=this.$refs["planTable"].selection;if(!e||1!==e.length)return this.$message.warning("请选择一条记录进行操作");var a="normal"===e[0].status?"禁用":"启用";this.$confirm("此操作将更新状态, 是否"+a+"?","提示",{confirmButtonText:a,cancelButtonText:"取消",type:"warning"}).then((function(){t.$sendAjax.doGet("/sync/plan/status?uuid="+e[0].uuid).then((function(e){e.data;t.addVisible=!1,t.$message({type:"success",message:a+"成功!"}),t.getData()})).finally((function(){t.loading=!1}))})).catch((function(){t.$message({type:"info",message:"已取消"+a})}))},openEdit:function(t){var e=this;this.$sendAjax.doGet("/sync/plan/content?uuid="+t).then((function(a){e.editForm.planContent=a.result,e.editForm.uuid=t,e.editVisible=!0})).finally((function(){}))},del:function(t){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$sendAjax.doGet("/sync/plan/delete?uuid="+t).then((function(t){t.data;e.addVisible=!1,e.$message({showClose:!0,message:"删除同步计划成功"}),e.getData()})).finally((function(){e.loading=!1}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},getData:function(){var t=this;this.loading=!0;var e={};Object.keys(this.searchForm).forEach((function(a){e[a]=t.searchForm[a]})),e.page=this.currentPage,e.limit=this.pageSize,this.$sendAjax.doGet("/sync/plan/page",{params:e}).then((function(e){t.dataList=e.result.dataList,t.total=e.result.totalRow})).finally((function(){t.loading=!1}))},currentChange:function(t){this.currentPage=t,this.getData()},add:function(){var t=this;this.$refs["addForm"].validate((function(e){if(!e)return!1;t.loading=!0,t.$sendAjax.doPost("/sync/plan/save",t.addForm,{emulateJSON:!1}).then((function(e){e.data;t.addVisible=!1,t.$message.success({showClose:!0,message:"新增同步计划成功"}),t.$refs["addForm"].resetFields(),t.getData()})).finally((function(){t.loading=!1}))}))},editCancel:function(){this.$refs["editForm"].resetFields(),this.editVisible=!1},edit:function(){var t=this;this.$refs["editForm"].validate((function(e){if(!e)return!1;t.loading=!0,t.$sendAjax.doPost("/sync/plan/update",t.editForm,{emulateJSON:!1}).then((function(e){e.data;t.$refs["editForm"].resetFields(),t.editVisible=!1,t.getData(),t.$message.success({showClose:!0,message:"更新同步计划成功"})})).finally((function(){t.loading=!1}))}))},addCancel:function(){this.$refs["editForm"].resetFields(),this.editVisible=!1},lookContent:function(t){var e=this;this.$sendAjax.doGet("/sync/plan/content?uuid="+t).then((function(t){e.showContent=t.result,e.showVisible=!0})).finally((function(){}))}},mounted:function(){this.getData()}}),s=i,l=(a("5c70"),a("2877")),r=Object(l["a"])(s,n,o,!1,null,"3393de6c",null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-30b51246.18d2c555.js.map