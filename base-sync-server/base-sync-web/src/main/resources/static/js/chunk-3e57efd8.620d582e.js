(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e57efd8"],{"159b":function(t,e,n){var a=n("da84"),i=n("fdbc"),o=n("785a"),s=n("17c2"),l=n("9112"),r=function(t){if(t&&t.forEach!==s)try{l(t,"forEach",s)}catch(e){t.forEach=s}};for(var c in i)i[c]&&r(a[c]&&a[c].prototype);r(o)},"17c2":function(t,e,n){"use strict";var a=n("b727").forEach,i=n("a640"),o=i("forEach");t.exports=o?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"62d5":function(t,e,n){},"7db0":function(t,e,n){"use strict";var a=n("23e7"),i=n("b727").find,o=n("44d2"),s="find",l=!0;s in[]&&Array(1)[s]((function(){l=!1})),a({target:"Array",proto:!0,forced:l},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},"829d":function(t,e,n){"use strict";n("62d5")},a640:function(t,e,n){"use strict";var a=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&a((function(){n.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,n){var a=n("23e7"),i=n("7b0b"),o=n("df75"),s=n("d039"),l=s((function(){o(1)}));a({target:"Object",stat:!0,forced:l},{keys:function(t){return o(i(t))}})},e02e:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plan"},[n("el-form",{ref:"searchForm",attrs:{size:"small",inline:!0,model:t.searchForm}},[n("el-form-item",{attrs:{label:"计划编号",prop:"planCode"}},[n("el-input",{attrs:{placeholder:"计划编号"},model:{value:t.searchForm.planCode,callback:function(e){t.$set(t.searchForm,"planCode",e)},expression:"searchForm.planCode"}})],1),n("el-form-item",{attrs:{label:"计划状态",prop:"status"}},[n("el-select",{attrs:{placeholder:"计划状态"},on:{change:t.getData},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[n("el-option",{attrs:{label:"全部",value:""}}),n("el-option",{attrs:{label:"启用",value:"normal"}}),n("el-option",{attrs:{label:"禁用",value:"forbid"}})],1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getData}},[t._v("查询")]),n("el-button",{attrs:{type:"warning",icon:"el-icon-refresh"},on:{click:t.reset}},[t._v("重置")]),n("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(e){t.addVisible=!0}}},[t._v("新增")]),n("el-button",{attrs:{type:"danger"},on:{click:t.updateStatus}},[t._v("更新状态")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"planTable",staticClass:"planTable",staticStyle:{width:"100%"},attrs:{border:"",size:"mini",stripe:"",data:t.dataList}},[n("el-table-column",{attrs:{label:"选择",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-radio",{attrs:{label:a.uuid},model:{value:t.uuid,callback:function(e){t.uuid=e},expression:"uuid"}},[n("span")])]}}])}),n("el-table-column",{attrs:{prop:"planCode",label:"计划编号",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"planCode",attrs:{underline:!1,type:"primary"},on:{click:function(n){return t.lookContent(e.row.uuid)}}},[t._v(t._s(e.row.planCode)+" ")])]}}])}),n("el-table-column",{attrs:{prop:"description",label:"计划名称"}}),n("el-table-column",{attrs:{prop:"srcDb",label:"源数据库"}}),n("el-table-column",{attrs:{prop:"destDb",label:"目标数据库"}}),n("el-table-column",{attrs:{prop:"srcProject",label:"源系统"}}),n("el-table-column",{attrs:{prop:"destProject",label:"目标系统"}}),n("el-table-column",{attrs:{width:"80",label:"启用状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["normal"===e.row.status?n("el-tag",{attrs:{type:"success",size:"small"}},[t._v("启用")]):n("el-tag",{attrs:{type:"danger",size:"small"}},[t._v("禁用")])]}}])}),n("el-table-column",{attrs:{width:"150",prop:"createTime",label:"创建时间"}}),n("el-table-column",{attrs:{width:"150",prop:"updateTime",label:"更新时间"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.del(e.row.uuid)}}},[n("i",{staticClass:"el-icon-delete"}),t._v(" 删除")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.openEdit(e.row.uuid)}}},[n("i",{staticClass:"el-icon-edit"}),t._v(" 编辑")])]}}])})],1),n("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:"新增计划",visible:t.addVisible},on:{"update:visible":function(e){t.addVisible=e}}},[n("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.addRules}},[n("el-form-item",{attrs:{prop:"planContent"}},[n("el-input",{attrs:{resize:"none",type:"textarea",rows:15,placeholder:"请输入内容"},model:{value:t.addForm.planContent,callback:function(e){t.$set(t.addForm,"planContent",e)},expression:"addForm.planContent"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.addCancel}},[t._v("取 消")]),n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.add}},[t._v("保 存")])],1)],1),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:"编辑计划",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[n("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.addRules}},[n("el-form-item",{attrs:{prop:"planContent"}},[n("el-input",{attrs:{resize:"none",type:"textarea",rows:15,placeholder:"请输入内容"},model:{value:t.editForm.planContent,callback:function(e){t.$set(t.editForm,"planContent",e)},expression:"editForm.planContent"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.editCancel}},[t._v("取 消")]),n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.edit}},[t._v("更新")])],1)],1),n("el-dialog",{attrs:{title:"同步计划",visible:t.showVisible},on:{"update:visible":function(e){t.showVisible=e}}},[t.showVisible?n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"javascript showContent",domProps:{textContent:t._s(t.showContent)}})]):t._e()])],1)},i=[],o=(n("7db0"),n("d3b7"),n("159b"),n("b64b"),{name:"Plan.vue",data:function(){return{uuid:"",loading:!0,searchForm:{status:"",planCode:""},addForm:{planContent:""},editForm:{planContent:""},addVisible:!1,showVisible:!1,editVisible:!1,showContent:"",dataList:[],total:0,pageSize:20,currentPage:1,addRules:{planContent:[{required:!0,message:"请填写同步计划内容",trigger:"blur"}]}}},methods:{reset:function(){this.$refs["searchForm"].resetFields(),this.getData()},updateStatus:function(){var t=this;if(!this.uuid)return this.$message.warning("请选择一条记录进行操作");var e=this.dataList.find((function(e){return e.uuid===t.uuid})),n="normal"===e.status?"禁用":"启用";this.$confirm("此操作将更新状态, 是否"+n+"?","提示",{confirmButtonText:n,cancelButtonText:"取消",type:"warning"}).then((function(){t.$sendAjax.doGet("/sync/plan/status?uuid="+t.uuid).then((function(e){e.data;t.addVisible=!1,t.$message({type:"success",message:n+"成功!"}),t.getData()})).finally((function(){t.loading=!1}))})).catch((function(t){console.log(t)}))},openEdit:function(t){var e=this;this.$sendAjax.doGet("/sync/plan/content?uuid="+t).then((function(n){e.editForm.planContent=n.result,e.editForm.uuid=t,e.editVisible=!0})).finally((function(){}))},del:function(t){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$sendAjax.doGet("/sync/plan/delete?uuid="+t).then((function(t){t.data;e.addVisible=!1,e.$message.success({showClose:!0,message:"删除同步计划成功"}),e.getData()})).finally((function(){e.loading=!1}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},getData:function(){var t=this;this.uuid="",this.loading=!0;var e={};Object.keys(this.searchForm).forEach((function(n){e[n]=t.searchForm[n]})),e.page=this.currentPage,e.limit=this.pageSize,this.$sendAjax.doGet("/sync/plan/page",{params:e}).then((function(e){t.dataList=e.result.dataList,t.total=e.result.totalRow})).finally((function(){t.loading=!1}))},currentChange:function(t){this.currentPage=t,this.getData()},add:function(){var t=this;this.$refs["addForm"].validate((function(e){if(!e)return!1;t.loading=!0,t.$sendAjax.doPost("/sync/plan/save",t.addForm,{emulateJSON:!1}).then((function(e){e.data;t.addVisible=!1,t.$message.success({showClose:!0,message:"新增同步计划成功"}),t.$refs["addForm"].resetFields(),t.getData()})).finally((function(){t.loading=!1}))}))},editCancel:function(){this.$refs["editForm"].resetFields(),this.editVisible=!1},edit:function(){var t=this;this.$refs["editForm"].validate((function(e){if(!e)return!1;t.loading=!0,t.$sendAjax.doPost("/sync/plan/update",t.editForm,{emulateJSON:!1}).then((function(e){e.data;t.$refs["editForm"].resetFields(),t.editVisible=!1,t.getData(),t.$message.success({showClose:!0,message:"更新同步计划成功"})})).finally((function(){t.loading=!1}))}))},addCancel:function(){this.$refs["editForm"].resetFields(),this.editVisible=!1},lookContent:function(t){var e=this;this.$sendAjax.doGet("/sync/plan/content?uuid="+t).then((function(t){e.showContent=t.result,e.showVisible=!0})).finally((function(){}))}},mounted:function(){this.getData()}}),s=o,l=(n("829d"),n("2877")),r=Object(l["a"])(s,a,i,!1,null,"166244f0",null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-3e57efd8.620d582e.js.map