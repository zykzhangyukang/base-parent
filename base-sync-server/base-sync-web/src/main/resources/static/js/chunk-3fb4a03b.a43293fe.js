(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fb4a03b"],{"04c6":function(t,e,n){"use strict";n("4de4"),n("d3b7"),n("159b"),n("b0c0");var a=n("4360");e["a"]={methods:{getConst:function(t){if(!t)return[];var e=a["a"].state.constant.filter((function(e){return e.group===t}));return e.length?e[0].itemList:[]},formatConst:function(t){var e={};return t.forEach((function(t){e[t.code]=t.name})),e}}}},"159b":function(t,e,n){var a=n("da84"),o=n("fdbc"),i=n("785a"),s=n("17c2"),r=n("9112"),l=function(t){if(t&&t.forEach!==s)try{r(t,"forEach",s)}catch(e){t.forEach=s}};for(var c in o)o[c]&&l(a[c]&&a[c].prototype);l(i)},"17c2":function(t,e,n){"use strict";var a=n("b727").forEach,o=n("a640"),i=o("forEach");t.exports=i?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,n){var a=n("d039"),o=n("b622"),i=n("2d00"),s=o("species");t.exports=function(t){return i>=51||!a((function(){var e=[],n=e.constructor={};return n[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"4de4":function(t,e,n){"use strict";var a=n("23e7"),o=n("b727").filter,i=n("1dde"),s=i("filter");a({target:"Array",proto:!0,forced:!s},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"7db0":function(t,e,n){"use strict";var a=n("23e7"),o=n("b727").find,i=n("44d2"),s="find",r=!0;s in[]&&Array(1)[s]((function(){r=!1})),a({target:"Array",proto:!0,forced:r},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},"830e":function(t,e,n){"use strict";n("f63c")},a640:function(t,e,n){"use strict";var a=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&a((function(){n.call(null,e||function(){throw 1},1)}))}},b64b:function(t,e,n){var a=n("23e7"),o=n("7b0b"),i=n("df75"),s=n("d039"),r=s((function(){i(1)}));a({target:"Object",stat:!0,forced:r},{keys:function(t){return i(o(t))}})},e02e:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plan"},[n("el-form",{ref:"searchForm",attrs:{size:"small",inline:!0,model:t.searchForm}},[n("el-form-item",{attrs:{label:"计划编号",prop:"planCode"}},[n("el-input",{attrs:{placeholder:"计划编号"},model:{value:t.searchForm.planCode,callback:function(e){t.$set(t.searchForm,"planCode",e)},expression:"searchForm.planCode"}})],1),n("el-form-item",{attrs:{label:"计划状态",prop:"status"}},[n("el-select",{staticClass:"w150",attrs:{placeholder:"计划状态"},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[n("el-option",{attrs:{label:"全部",value:""}}),t._l(t.planStatusG,(function(e){return n("el-option",{key:e.code,attrs:{label:t.planStatusGName[e.code],value:e.code}})}))],2)],1),n("br"),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getData}},[t._v("查询")]),n("el-button",{attrs:{type:"warning",icon:"el-icon-refresh"},on:{click:t.reset}},[t._v("重置")]),n("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(e){t.addVisible=!0}}},[t._v("新增")]),n("el-button",{attrs:{type:"danger"},on:{click:t.updateStatus}},[t._v("更新状态")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"planTable",staticClass:"planTable",staticStyle:{width:"100%"},attrs:{border:"",size:"mini",stripe:"",data:t.dataList}},[n("el-table-column",{attrs:{label:"选择",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-radio",{attrs:{label:a.uuid},model:{value:t.uuid,callback:function(e){t.uuid=e},expression:"uuid"}},[n("span")])]}}])}),n("el-table-column",{attrs:{prop:"planCode",label:"计划编号",width:"300px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"planCode",attrs:{underline:!1,type:"primary"},on:{click:function(n){return t.lookContent(e.row.uuid)}}},[t._v(t._s(e.row.planCode)+" ")])]}}])}),n("el-table-column",{attrs:{prop:"description",label:"计划名称",align:"center"}}),n("el-table-column",{attrs:{prop:"srcDb",label:"源数据库",align:"center"}}),n("el-table-column",{attrs:{prop:"destDb",label:"目标数据库",align:"center"}}),n("el-table-column",{attrs:{prop:"srcProject",label:"源系统",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.srcProjectGName[e.row.srcProject])+" ")]}}])}),n("el-table-column",{attrs:{prop:"destProject",label:"目标系统",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.destProjectGName[e.row.destProject])+" ")]}}])}),n("el-table-column",{attrs:{width:"80",align:"center",label:"启用状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["normal"===e.row.status?n("span",{staticStyle:{color:"green"}},[t._v(t._s(t.planStatusGName[e.row.status]))]):n("span",{staticStyle:{color:"#f40"},attrs:{type:"danger",size:"small"}},[t._v(t._s(t.planStatusGName[e.row.status]))])]}}])}),n("el-table-column",{attrs:{width:"150",prop:"createTime",align:"center",label:"创建时间"}}),n("el-table-column",{attrs:{width:"150",prop:"updateTime",align:"center",label:"更新时间"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return t.del(e.row.uuid)}}},[n("i",{staticClass:"el-icon-delete"}),t._v(" 删除")]),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return t.openEdit(e.row.uuid)}}},[n("i",{staticClass:"el-icon-edit"}),t._v(" 编辑")])]}}])})],1),n("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}}),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:"新增计划",visible:t.addVisible},on:{"update:visible":function(e){t.addVisible=e}}},[n("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.addRules}},[n("el-form-item",{attrs:{prop:"planContent"}},[n("el-input",{attrs:{resize:"none",type:"textarea",rows:15,placeholder:"请输入内容"},model:{value:t.addForm.planContent,callback:function(e){t.$set(t.addForm,"planContent",e)},expression:"addForm.planContent"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.addCancel}},[t._v("取 消")]),n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.add}},[t._v("保 存")])],1)],1),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:"编辑计划",visible:t.editVisible},on:{"update:visible":function(e){t.editVisible=e}}},[n("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.addRules}},[n("el-form-item",{attrs:{prop:"planContent"}},[n("el-input",{attrs:{resize:"none",type:"textarea",rows:15,placeholder:"请输入内容"},model:{value:t.editForm.planContent,callback:function(e){t.$set(t.editForm,"planContent",e)},expression:"editForm.planContent"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.editCancel}},[t._v("取 消")]),n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.edit}},[t._v("更新")])],1)],1),n("el-dialog",{attrs:{title:"同步计划",visible:t.showVisible},on:{"update:visible":function(e){t.showVisible=e}}},[t.showVisible?n("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[n("code",{staticClass:"javascript showContent",domProps:{textContent:t._s(t.showContent)}})]):t._e()])],1)},o=[],i=(n("7db0"),n("d3b7"),n("159b"),n("b64b"),n("04c6")),s={name:"Plan.vue",data:function(){return{uuid:"",loading:!0,searchForm:{status:"",planCode:""},addForm:{planContent:""},editForm:{planContent:""},addVisible:!1,showVisible:!1,editVisible:!1,showContent:"",dataList:[],total:0,pageSize:20,currentPage:1,addRules:{planContent:[{required:!0,message:"请填写同步计划内容",trigger:"blur"}]}}},computed:{planStatusG:function(){return i["a"].methods.getConst("plan_status")},planStatusGName:function(){return i["a"].methods.formatConst(this.planStatusG)},srcProjectG:function(){return i["a"].methods.getConst("src_project")},srcProjectGName:function(){return i["a"].methods.formatConst(this.srcProjectG)},destProjectG:function(){return i["a"].methods.getConst("dest_project")},destProjectGName:function(){return i["a"].methods.formatConst(this.destProjectG)}},methods:{reset:function(){this.$refs["searchForm"].resetFields(),this.getData()},updateStatus:function(){var t=this;if(!this.uuid)return this.$message.warning("请选择一条记录进行操作");var e=this.dataList.find((function(e){return e.uuid===t.uuid})),n="normal"===e.status?"禁用":"启用";this.$confirm("此操作将更新状态, 是否"+n+"?","提示",{confirmButtonText:n,cancelButtonText:"取消",type:"warning"}).then((function(){t.$sendAjax.doGet("/sync/plan/status?uuid="+t.uuid).then((function(e){e.data;t.addVisible=!1,t.$message({type:"success",message:n+"成功!"}),t.getData()})).finally((function(){t.loading=!1}))})).catch((function(t){console.log(t)}))},openEdit:function(t){var e=this;this.$sendAjax.doGet("/sync/plan/content?uuid="+t).then((function(n){e.editForm.planContent=n.result,e.editForm.uuid=t,e.editVisible=!0})).finally((function(){}))},del:function(t){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$sendAjax.doGet("/sync/plan/delete?uuid="+t).then((function(t){t.data;e.addVisible=!1,e.$message.success({showClose:!0,message:"删除同步计划成功"}),e.getData()})).finally((function(){e.loading=!1}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},getData:function(){var t=this;this.uuid="",this.loading=!0;var e={};Object.keys(this.searchForm).forEach((function(n){e[n]=t.searchForm[n]})),e.page=this.currentPage,e.limit=this.pageSize,this.$sendAjax.doGet("/sync/plan/page",{params:e}).then((function(e){t.dataList=e.result.dataList,t.total=e.result.totalRow})).finally((function(){t.loading=!1}))},currentChange:function(t){this.currentPage=t,this.getData()},add:function(){var t=this;this.$refs["addForm"].validate((function(e){if(!e)return!1;t.loading=!0,t.$sendAjax.doPost("/sync/plan/save",t.addForm,{emulateJSON:!1}).then((function(e){e.data;t.addVisible=!1,t.$message.success({showClose:!0,message:"新增同步计划成功"}),t.$refs["addForm"].resetFields(),t.getData()})).finally((function(){t.loading=!1}))}))},editCancel:function(){this.$refs["editForm"].resetFields(),this.editVisible=!1},edit:function(){var t=this;this.$refs["editForm"].validate((function(e){if(!e)return!1;t.loading=!0,t.$sendAjax.doPost("/sync/plan/update",t.editForm,{emulateJSON:!1}).then((function(e){e.data;t.$refs["editForm"].resetFields(),t.editVisible=!1,t.getData(),t.$message.success({showClose:!0,message:"更新同步计划成功"})})).finally((function(){t.loading=!1}))}))},addCancel:function(){this.$refs["addForm"].resetFields(),this.addVisible=!1},lookContent:function(t){var e=this;this.$sendAjax.doGet("/sync/plan/content?uuid="+t).then((function(t){e.showContent=t.result,e.showVisible=!0})).finally((function(){}))}},mounted:function(){this.getData()}},r=s,l=(n("830e"),n("2877")),c=Object(l["a"])(r,a,o,!1,null,"7d79797e",null);e["default"]=c.exports},f63c:function(t,e,n){}}]);
//# sourceMappingURL=chunk-3fb4a03b.a43293fe.js.map