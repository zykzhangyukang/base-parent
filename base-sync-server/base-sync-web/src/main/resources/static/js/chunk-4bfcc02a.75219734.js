(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bfcc02a"],{"0ff3":function(e,t,a){"use strict";a("edc8")},"159b":function(e,t,a){var n=a("da84"),s=a("fdbc"),r=a("785a"),l=a("17c2"),o=a("9112"),i=function(e){if(e&&e.forEach!==l)try{o(e,"forEach",l)}catch(t){e.forEach=l}};for(var c in s)s[c]&&i(n[c]&&n[c].prototype);i(r)},"17c2":function(e,t,a){"use strict";var n=a("b727").forEach,s=a("a640"),r=s("forEach");e.exports=r?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"1dde":function(e,t,a){var n=a("d039"),s=a("b622"),r=a("2d00"),l=s("species");e.exports=function(e){return r>=51||!n((function(){var t=[],a=t.constructor={};return a[l]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"5bc4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"result"},[a("el-form",{ref:"searchForm",attrs:{size:"small",inline:!0,model:e.searchForm}},[a("el-form-item",{attrs:{label:"源系统",prop:"srcProject"}},[a("el-select",{staticClass:"w150",attrs:{placeholder:"源系统"},model:{value:e.searchForm.srcProject,callback:function(t){e.$set(e.searchForm,"srcProject",t)},expression:"searchForm.srcProject"}})],1),a("el-form-item",{attrs:{label:"目标系统",prop:"destProject"}},[a("el-select",{staticClass:"w150",attrs:{placeholder:"目标系统"},model:{value:e.searchForm.destProject,callback:function(t){e.$set(e.searchForm,"destProject",t)},expression:"searchForm.destProject"}})],1),a("el-form-item",{attrs:{label:"计划编号",prop:"planCode"}},[a("el-input",{attrs:{placeholder:"计划编号"},model:{value:e.searchForm.planCode,callback:function(t){e.$set(e.searchForm,"planCode",t)},expression:"searchForm.planCode"}})],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.createTimeRange,callback:function(t){e.createTimeRange=t},expression:"createTimeRange"}})],1),a("el-form-item",{attrs:{label:"同步状态",prop:"syncStatus"}},[a("el-select",{staticClass:"w150",attrs:{placeholder:"计划状态"},model:{value:e.searchForm.syncStatus,callback:function(t){e.$set(e.searchForm,"syncStatus",t)},expression:"searchForm.syncStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"成功",value:"success"}}),a("el-option",{attrs:{label:"失败",value:"fail"}})],1)],1),a("el-form-item",{attrs:{label:"重试次数",prop:"repeatCount"}},[a("el-select",{staticClass:"w150",attrs:{placeholder:"重试次数"},model:{value:e.searchForm.repeatCount,callback:function(t){e.$set(e.searchForm,"repeatCount",t)},expression:"searchForm.repeatCount"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:">=1",value:"1"}}),a("el-option",{attrs:{label:">=2",value:"2"}}),a("el-option",{attrs:{label:">=3",value:"3"}}),a("el-option",{attrs:{label:">=4",value:"4"}}),a("el-option",{attrs:{label:">=5",value:"5"}}),a("el-option",{attrs:{label:">=6",value:"6"}})],1)],1),a("el-form-item",{attrs:{label:"消息来源",prop:"msgSrc"}},[a("el-select",{staticClass:"w150",attrs:{placeholder:"消息来源"},model:{value:e.searchForm.msgSrc,callback:function(t){e.$set(e.searchForm,"msgSrc",t)},expression:"searchForm.msgSrc"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"RocketMQ",value:"rocket_mq"}}),a("el-option",{attrs:{label:"手动同步",value:"handle"}}),a("el-option",{attrs:{label:"定时器同步",value:"job"}})],1)],1),a("el-form-item",{attrs:{label:"关键词",prop:"keywords"}},[a("el-input",{staticClass:"w500",attrs:{placeholder:"关键词,消息内容,同步内容,备注"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getData}},[e._v("查询")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-refresh"},on:{click:e.reset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary"},on:{click:e.signSuccess}},[e._v("标记成功")]),a("el-button",{attrs:{type:"primary"},on:{click:e.validResult}},[e._v("校验数据")]),a("el-button",{attrs:{type:"primary"},on:{click:e.repeatSync}},[e._v("重新同步")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"resultTable",staticClass:"resultTable",staticStyle:{width:"100%"},attrs:{border:"",size:"mini",stripe:"",data:e.dataList,"highlight-current-row":""}},[a("el-table-column",{attrs:{label:"选择",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-radio",{attrs:{label:n.uuid},model:{value:e.uuid,callback:function(t){e.uuid=t},expression:"uuid"}},[a("span")])]}}])}),a("el-table-column",{attrs:{prop:"planCode",label:"计划编号",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"planCode"},[e._v(e._s(e._f("ellipsis")(t.row.planCode,35)))])]}}])}),a("el-table-column",{attrs:{prop:"planName",label:"计划名称",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("ellipsis")(t.row.planName,20)))])]}}])}),a("el-table-column",{attrs:{prop:"srcProject",label:"源系统",width:"120px"}}),a("el-table-column",{attrs:{prop:"destProject",label:"目标系统",width:"120px"}}),a("el-table-column",{attrs:{prop:"msgCreateTime",width:"150px",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"syncTime",width:"150px",label:"同步时间"}}),a("el-table-column",{attrs:{prop:"status",width:"100px",label:"同步结果"},scopedSlots:e._u([{key:"default",fn:function(t){return["success"===t.row.status?a("span",{staticStyle:{color:"#67C23A"}},[e._v("成功 ("+e._s((new Date(t.row.syncTime).getTime()-new Date(t.row.msgCreateTime))/1e3)+")")]):a("span",{staticStyle:{color:"red",cursor:"pointer"}},[a("el-tooltip",{attrs:{effect:"light","popper-class":"tooltip-width",content:t.row.errorMsg,placement:"top"}},[a("span",[e._v("失败")])])],1)]}}])}),a("el-table-column",{attrs:{prop:"repeatCount",width:"80px",label:"重试次数"}}),a("el-table-column",{attrs:{prop:"msgSrc",width:"100px",label:"来源"}}),a("el-table-column",{attrs:{width:"150px",prop:"msgContent",label:"消息内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#3a8ee6",cursor:"pointer"},on:{click:function(a){return e.showMsgContent(t.row.msgContent)}}},[e._v(e._s(e._f("ellipsis")(t.row.msgContent,15)))])]}}])}),a("el-table-column",{attrs:{width:"150px",prop:"syncContent",label:"同步内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#3a8ee6",cursor:"pointer"},on:{click:function(a){return e.showSyncContent(t.row.syncContent)}}},[e._v(e._s(e._f("ellipsis")(t.row.syncContent,15)))])]}}])}),a("el-table-column",{attrs:{width:"100px",prop:"remark",label:"备注系统"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#E6A23C",cursor:"pointer"}},[e._v(e._s(e._f("ellipsis")(t.row.remark,5)))])]}}])})],1),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,layout:"total, prev, pager, next","page-size":e.pageSize,total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}}),a("el-dialog",{attrs:{title:"同步内容",visible:e.syncVisible},on:{"update:visible":function(t){e.syncVisible=t}}},[e.syncVisible?a("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[a("code",{staticClass:"c++ showContent",domProps:{textContent:e._s(e.syncContent)}})]):e._e()]),a("el-dialog",{attrs:{title:"消息内容",visible:e.msgVisible},on:{"update:visible":function(t){e.msgVisible=t}}},[e.msgVisible?a("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[a("code",{staticClass:"c++ showContent",domProps:{textContent:e._s(e.msgContent)}})]):e._e()]),a("el-dialog",{attrs:{title:"校验数据",visible:e.validVisible},on:{"update:visible":function(t){e.validVisible=t}}},e._l(e.validTables,(function(t,n){return a("el-table",{key:n,staticStyle:{width:"100%"},attrs:{size:"mini",data:[t]}},[a("el-table-column",{attrs:{align:"center",label:t.srcTable+"->"+t.destTable}},[a("el-table-column",{attrs:{align:"center",prop:"province",width:"200px",label:"数据库字段"},scopedSlots:e._u([{key:"default",fn:function(n){n.row;return[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},e._l(t.srcColumnList,(function(n,s){return a("p",{attrs:{size:"mini"}},[e._v(e._s(n+"->"+t.destColumnList[s]))])})),0)],1)]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",prop:"city",label:"数据库值"},scopedSlots:e._u([{key:"default",fn:function(n){n.row;return[a("el-col",{attrs:{span:24}},e._l(t.destResultList,(function(n,s){return a("p",{attrs:{size:"mini"}},[e._v(e._s(n+"->"+t.destResultList[s]))])})),0)]}}],null,!0)})],1)],1)})),1)],1)},s=[],r=(a("fb6a"),a("e9c4"),a("d3b7"),a("159b"),a("b64b"),a("7db0"),{name:"Result.vue",data:function(){return{uuid:"",validTables:[],loading:!0,syncVisible:!1,syncContent:"",msgVisible:!1,validVisible:!1,msgContent:"",dataList:[],searchForm:{syncStatus:"",planCode:"",keywords:"",repeatCount:"",msgSrc:"",srcProject:"",destProject:""},createTimeRange:[new Date((new Date).toLocaleDateString()),new Date],total:0,pageSize:16,currentPage:1,pickerOptions:{shortcuts:[{text:"最近5分钟",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-3e5),e.$emit("pick",[a,t])}},{text:"最近一天",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},filters:{ellipsis:function(e,t){return e?e.length>t?e.slice(0,t)+"...":e:""}},methods:{showSyncContent:function(e){var t=JSON.parse(e);this.syncContent=JSON.stringify(t,null,"\t"),this.syncVisible=!0},showMsgContent:function(e){var t=JSON.parse(e);this.msgContent=JSON.stringify(t,null,"\t"),this.msgVisible=!0},reset:function(){this.$refs["searchForm"].resetFields(),this.currentPage=1,this.uuid="",this.createTimeRange=[new Date((new Date).toLocaleDateString()),new Date],this.getData()},getData:function(){var e=this;this.uuid="",this.loading=!0;var t={};Object.keys(this.searchForm).forEach((function(a){t[a]=e.searchForm[a]})),t.page=this.currentPage,t.limit=this.pageSize,t.startTime=this.createTimeRange[0],t.endTime=this.createTimeRange[1],this.$sendAjax.doGet("/sync/result/search",{params:t}).then((function(t){e.dataList=t.result.dataList,e.total=t.result.totalRow})).finally((function(){e.loading=!1}))},signSuccess:function(){var e=this;if(!this.uuid)return this.$message.warning("请选择要操作的记录");this.$confirm("操作存在风险, 仅限开发人员操作!","标记成功",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$sendAjax.doGet("/sync/result/sign/success?uuid="+e.uuid).then((function(t){t.data;e.addVisible=!1,e.$message.success({showClose:!0,message:"标记同步记录成功"}),e.getData()})).finally((function(){e.loading=!1}))})).catch((function(t){console.log(t),e.$message({type:"info",message:"已取消标记"})}))},validResult:function(){var e=this;if(!this.uuid)return this.$message.warning("请选择一条记录进行操作");var t=this.dataList.find((function(t){return t.uuid===e.uuid}));this.$sendAjax.doPost("/sync/result/valid/data",{msgContent:t.msgContent},{emulateJSON:!0}).then((function(t){var a=t.result;console.log(a),e.validVisible=!0,e.validTables=a})).finally((function(){e.loading=!1}))},repeatSync:function(){var e=this;if(!this.uuid)return this.$message.warning("请选择要操作的记录");this.$confirm("操作存在风险, 仅限开发人员操作!","重新同步",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$sendAjax.doGet("/sync/result/repeat/sync?uuid="+e.uuid).then((function(t){t.data;e.addVisible=!1,e.$message.success({showClose:!0,message:"重新同步成功"}),e.getData()})).finally((function(){e.loading=!1}))})).catch((function(t){console.log(t),e.$message({type:"info",message:"已取消重新同步"})}))},currentChange:function(e){this.currentPage=e,this.getData()}},created:function(){this.getData()}}),l=r,o=(a("0ff3"),a("2877")),i=Object(o["a"])(l,n,s,!1,null,null,null);t["default"]=i.exports},"7db0":function(e,t,a){"use strict";var n=a("23e7"),s=a("b727").find,r=a("44d2"),l="find",o=!0;l in[]&&Array(1)[l]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),r(l)},8418:function(e,t,a){"use strict";var n=a("a04b"),s=a("9bf2"),r=a("5c6c");e.exports=function(e,t,a){var l=n(t);l in e?s.f(e,l,r(0,a)):e[l]=a}},a640:function(e,t,a){"use strict";var n=a("d039");e.exports=function(e,t){var a=[][e];return!!a&&n((function(){a.call(null,t||function(){throw 1},1)}))}},b64b:function(e,t,a){var n=a("23e7"),s=a("7b0b"),r=a("df75"),l=a("d039"),o=l((function(){r(1)}));n({target:"Object",stat:!0,forced:o},{keys:function(e){return r(s(e))}})},edc8:function(e,t,a){},fb6a:function(e,t,a){"use strict";var n=a("23e7"),s=a("da84"),r=a("e8b5"),l=a("68ee"),o=a("861d"),i=a("23cb"),c=a("07fa"),u=a("fc6a"),p=a("8418"),d=a("b622"),f=a("1dde"),m=a("f36a"),h=f("slice"),b=d("species"),g=s.Array,v=Math.max;n({target:"Array",proto:!0,forced:!h},{slice:function(e,t){var a,n,s,d=u(this),f=c(d),h=i(e,f),w=i(void 0===t?f:t,f);if(r(d)&&(a=d.constructor,l(a)&&(a===g||r(a.prototype))?a=void 0:o(a)&&(a=a[b],null===a&&(a=void 0)),a===g||void 0===a))return m(d,h,w);for(n=new(void 0===a?g:a)(v(w-h,0)),s=0;h<w;h++,s++)h in d&&p(n,s,d[h]);return n.length=s,n}})}}]);
//# sourceMappingURL=chunk-4bfcc02a.75219734.js.map